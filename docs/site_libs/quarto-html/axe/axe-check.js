class QuartoAxeReporter{constructor(e,t){this.axeResult=e,this.options=t}report(){throw new Error("report() is an abstract method")}}class QuartoAxeJsonReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}report(){console.log(JSON.stringify(this.axeResult,null,2))}}class QuartoAxeConsoleReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}report(){for(const e of this.axeResult.violations){console.log(e.description);for(const t of e.nodes)for(const e of t.target)console.log(e),console.log(document.querySelector(e))}}}class QuartoAxeDocumentReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}createViolationElement(e){const n=document.createElement("div"),s=document.createElement("div");s.className="quarto-axe-violation-description",s.innerText=`${e.impact.replace(/^[a-z]/,e=>e.toLocaleUpperCase())}: ${e.description}`,n.appendChild(s);const o=document.createElement("div");o.className="quarto-axe-violation-help",o.innerText=e.help,n.appendChild(o);const i=document.createElement("div");i.className="quarto-axe-violation-nodes",n.appendChild(i);const t=document.createElement("div");t.className="quarto-axe-violation-selector";for(const n of e.nodes){for(const e of n.target){const s=document.createElement("span");s.className="quarto-axe-violation-target",s.innerText=e,t.appendChild(s),t.addEventListener("mouseenter",()=>{const t=document.querySelector(e);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("quarto-axe-hover-highlight"),setTimeout(()=>{t.style.border=""},2e3))}),t.addEventListener("mouseleave",()=>{const t=document.querySelector(e);t&&t.classList.remove("quarto-axe-hover-highlight")}),t.addEventListener("click",()=>{console.log(document.querySelector(e))}),t.appendChild(s)}i.appendChild(t)}return n}report(){const t=this.axeResult.violations,e=document.createElement("div");if(e.className="quarto-axe-report",t.length===0){const t=document.createElement("div");t.className="quarto-axe-no-violations",t.innerText="No axe-core violations found.",e.appendChild(t)}t.forEach(t=>{e.appendChild(this.createViolationElement(t))}),document.querySelector("main").appendChild(e)}}const reporters={json:QuartoAxeJsonReporter,console:QuartoAxeConsoleReporter,document:QuartoAxeDocumentReporter};class QuartoAxeChecker{constructor(e){this.options=e}async init(){const t=(await import("https://cdn.skypack.dev/pin/axe-core@v4.10.3-aVOFXWsJaCpVrtv89pCa/mode=imports,min/optimized/axe-core.js")).default,e=await t.run({exclude:["[data-tabster-dummy]"],preload:{assets:["cssom"],timeout:5e4}}),n=this.options===!0?new QuartoAxeConsoleReporter(e):new reporters[this.options.output](e,this.options);n.report()}}export async function init(){const e=document.querySelector("#quarto-axe-checker-options");if(e){const t=JSON.parse(atob(e.textContent)),n=new QuartoAxeChecker(t);await n.init()}}