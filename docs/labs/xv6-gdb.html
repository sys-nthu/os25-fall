<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=en xml:lang=en><meta charset=utf-8><meta name=generator content="quarto-1.8.26"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><title>xv6-gdb – Operating System (2025 Fall)</title><style>code{white-space:pre-wrap}span.smallcaps{font-variant:small-caps}div.columns{display:flex;gap:min(4vw,1.5em)}div.column{flex:auto;overflow-x:auto}div.hanging-indent{margin-left:1.5em;text-indent:-1.5em}ul.task-list{list-style:none}ul.task-list li input[type=checkbox]{width:.8em;margin:0 .8em .2em -1em;vertical-align:middle}html{-webkit-text-size-adjust:100%}pre>code.sourceCode{white-space:pre;position:relative}pre>code.sourceCode>span{display:inline-block;line-height:1.25}pre>code.sourceCode>span:empty{height:1.2em}.sourceCode{overflow:visible}code.sourceCode>span{color:inherit;text-decoration:inherit}div.sourceCode{margin:1em 0}pre.sourceCode{margin:0}@media screen{div.sourceCode{overflow:auto}}@media print{pre>code.sourceCode{white-space:pre-wrap}pre>code.sourceCode>span{text-indent:-5em;padding-left:5em}}pre.numberSource code{counter-reset:source-line 0}pre.numberSource code>span{position:relative;left:-4em;counter-increment:source-line}pre.numberSource code>span>a:first-child::before{content:counter(source-line);position:relative;left:-1em;text-align:right;vertical-align:baseline;border:none;display:inline-block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 4px;width:4em}pre.numberSource{margin-left:3em;padding-left:4px}div.sourceCode{}@media screen{pre>code.sourceCode>span>a:first-child::before{text-decoration:underline}}</style><script src=../site_libs/quarto-nav/quarto-nav.js></script><script src=../site_libs/clipboard/clipboard.min.js></script><script src=../site_libs/quarto-search/autocomplete.umd.js></script><script src=../site_libs/quarto-search/fuse.min.js></script><script src=../site_libs/quarto-search/quarto-search.js></script><meta name=quarto:offset content="../"><link href=../images/orange.png rel=icon type=image/png><script src=../site_libs/quarto-html/quarto.js type=module></script><script src=../site_libs/quarto-html/tabsets/tabsets.js type=module></script><script src=../site_libs/quarto-html/axe/axe-check.js type=module></script><script src=../site_libs/quarto-html/popper.min.js></script><script src=../site_libs/quarto-html/tippy.umd.min.js></script><script src=../site_libs/quarto-html/anchor.min.js></script><link href=../site_libs/quarto-html/tippy.css rel=stylesheet><link href=../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css rel=stylesheet id=quarto-text-highlighting-styles><script src=../site_libs/bootstrap/bootstrap.min.js></script><link href=../site_libs/bootstrap/bootstrap-icons.css rel=stylesheet><link href=../site_libs/bootstrap/bootstrap-9ecadfe613acd7a4ee5ec0d5a7e06c4c.min.css rel=stylesheet append-hash=true id=quarto-bootstrap data-mode=light><script id=quarto-search-options type=application/json>{"location":"navbar","copy-button":false,"collapse-after":3,"panel-placement":"end","type":"overlay","limit":50,"keyboard-shortcut":["f","/","s"],"show-item-context":false,"language":{"search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search"}}</script><body class="nav-sidebar docked nav-fixed quarto-light"><div id=quarto-search-results></div><header id=quarto-header class="headroom fixed-top"><nav class="navbar navbar-expand-lg" data-bs-theme=dark><div class="navbar-container container-fluid"><div class="navbar-brand-container mx-auto"><a class=navbar-brand href=../index.html><span class=navbar-title>Operating System (2025 Fall)</span></a></div><div id=quarto-search title=Search></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarCollapse aria-controls=navbarCollapse role=menu aria-expanded=false aria-label="Toggle navigation" onclick=window.quartoToggleHeadroom&&window.quartoToggleHeadroom()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarCollapse><ul class="navbar-nav navbar-nav-scroll me-auto"><li class=nav-item><a class="nav-link active" href=../index.html aria-current=page><span class=menu-text>Home</span></a><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=nav-menu-handouts role=link data-bs-toggle=dropdown aria-expanded=false><span class=menu-text>Handouts</span></a><ul class=dropdown-menu aria-labelledby=nav-menu-handouts><li><a class=dropdown-item href=../handouts/env_setup.html><span class=dropdown-text>Environment Setup</span></a><li><a class=dropdown-item href=../handouts/unix.html><span class=dropdown-text>Unix</span></a><li><a class=dropdown-item href=../handouts/privilege.html><span class=dropdown-text>Privilege</span></a><li><a class=dropdown-item href=../handouts/scheduler.html><span class=dropdown-text>Scheduler</span></a><li><a class=dropdown-item href=../handouts/buffercache.html><span class=dropdown-text>Buffer Cache</span></a><li><a class=dropdown-item href=../handouts/vm-page-size.html><span class=dropdown-text>Virtual Memory: Page Size</span></a></ul><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=nav-menu-labs role=link data-bs-toggle=dropdown aria-expanded=false><span class=menu-text>Labs</span></a><ul class=dropdown-menu aria-labelledby=nav-menu-labs><li><a class=dropdown-item href=../labs/mini-cloud.html><span class=dropdown-text>Mini Cloud</span></a><li><a class=dropdown-item href=../labs/linking.html><span class=dropdown-text>Linking</span></a><li><a class=dropdown-item href=../labs/process-creation.html><span class=dropdown-text>Process Creation</span></a><li><a class=dropdown-item href=../labs/process-state.html><span class=dropdown-text>Process State</span></a><li><a class=dropdown-item href=../labs/process-address-space.html><span class=dropdown-text>Process Address Space</span></a><li><hr class=dropdown-divider><li><a class=dropdown-item href=../labs/path-traversal.html><span class=dropdown-text>Path Traversal</span></a><li><a class=dropdown-item href=../labs/pipe-passwords.html><span class=dropdown-text>Pipe Passwords</span></a><li><a class=dropdown-item href=../labs/pipe-dup.html><span class=dropdown-text>Pipe and dup()</span></a><li><a class=dropdown-item href=../labs/pipe-pingpong.html><span class=dropdown-text>Pipe Ping-Pong</span></a><li><a class=dropdown-item href=../labs/fifo.html><span class=dropdown-text>FIFO (named pipe)</span></a><li><hr class=dropdown-divider><li><a class=dropdown-item href=../labs/cat.html><span class=dropdown-text>Cat</span></a><li><hr class=dropdown-divider><li><a class=dropdown-item href=../labs/xv6-syscall.html><span class=dropdown-text>xv6 System Call Tracing</span></a></ul><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=nav-menu-admin role=link data-bs-toggle=dropdown aria-expanded=false><span class=menu-text>Admin</span></a><ul class=dropdown-menu aria-labelledby=nav-menu-admin><li><a class=dropdown-item href=../admin/policies.html><span class=dropdown-text>Policies</span></a><li><a class=dropdown-item href=../admin/explore.html><span class=dropdown-text>Exploratory Projects</span></a><li><a class=dropdown-item href=../admin/waitbutwhy.html><span class=dropdown-text>SD1↓ (燒蛋一下)</span></a></ul></ul><ul class="navbar-nav navbar-nav-scroll ms-auto"><li class="nav-item compact"><a class=nav-link href="https://elearn.nthu.edu.tw/course/view.php?id=38873"><i class="bi bi-globe" role=img></i><span class=menu-text></span></a></ul></div><div class=quarto-navbar-tools></div></div></nav><nav class=quarto-secondary-nav><div class="container-fluid d-flex"><button type=button class="quarto-btn-toggle btn" data-bs-toggle=collapse role=button data-bs-target=.quarto-sidebar-collapse-item aria-controls=quarto-sidebar aria-expanded=false aria-label="Toggle sidebar navigation" onclick=window.quartoToggleHeadroom&&window.quartoToggleHeadroom()>
<i class="bi bi-layout-text-sidebar-reverse"></i></button><nav class=quarto-page-breadcrumbs aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=../weeks/w9.html>Worksheet 9</a><li class=breadcrumb-item><a href=../labs/xv6-gdb.html>GNU Debugger Tutorial</a></ol></nav><a class=flex-grow-1 role=navigation data-bs-toggle=collapse data-bs-target=.quarto-sidebar-collapse-item aria-controls=quarto-sidebar aria-expanded=false aria-label="Toggle sidebar navigation" onclick=window.quartoToggleHeadroom&&window.quartoToggleHeadroom()></a><button type=button class="btn quarto-search-button" aria-label=Search onclick=window.quartoOpenSearch()>
<i class="bi bi-search"></i></button></div></nav></header><div id=quarto-content class="quarto-container page-columns page-rows-contents page-layout-article page-navbar"><nav id=quarto-sidebar class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center"><div class=sidebar-search><div id=quarto-search title=Search></div></div></div><div class=sidebar-menu-container><ul class="list-unstyled mt-1"><li class=sidebar-item><div class=sidebar-item-container><a href=../index.html class="sidebar-item-text sidebar-link"><span class=menu-text>OS 2025 Fall</span></a></div><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w2.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 2</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-1 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-1 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/env_setup.html class="sidebar-item-text sidebar-link"><span class=menu-text>Environment setup</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w3.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 3</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-2 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-2 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/unix.html class="sidebar-item-text sidebar-link"><span class=menu-text>Unix Philosophy</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/mini-cloud.html class="sidebar-item-text sidebar-link"><span class=menu-text>Your First Week in OS Journey</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/process-creation.html class="sidebar-item-text sidebar-link"><span class=menu-text><code>fork()</code>/<code>exec()</code></span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w4.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 4</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-3 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-3 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/privilege.html class="sidebar-item-text sidebar-link"><span class=menu-text>Privilege</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/path-traversal.html class="sidebar-item-text sidebar-link"><span class=menu-text>Lab: Path Traversal Attack</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/process-address-space.html class="sidebar-item-text sidebar-link"><span class=menu-text>Address Space Layout</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/linking.html class="sidebar-item-text sidebar-link"><span class=menu-text>Static vs Dynamic Linking</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w5.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 5</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-4 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-4 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/pipe-passwords.html class="sidebar-item-text sidebar-link"><span class=menu-text>Parallelizing Rainbow Table Lookup with Pipes</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/pipe-dup.html class="sidebar-item-text sidebar-link"><span class=menu-text>Pipes, Redirection, and File Descriptors</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/fifo.html class="sidebar-item-text sidebar-link"><span class=menu-text>FIFO (named pipe)</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w6.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 6</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-5 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-5 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/scheduler.html class="sidebar-item-text sidebar-link"><span class=menu-text>Schedulers</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/process-state.html class="sidebar-item-text sidebar-link"><span class=menu-text>Process States in Linux</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/pipe-pingpong.html class="sidebar-item-text sidebar-link"><span class=menu-text>Pipe Pingpong</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w8.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 8</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-6 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-6 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/buffercache.html class="sidebar-item-text sidebar-link"><span class=menu-text>Caching and Buffering</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/cat.html class="sidebar-item-text sidebar-link"><span class=menu-text>How <code>cat</code> works?</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w9.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 9</span></a>
<a class="sidebar-item-toggle text-start" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-7 role=navigation aria-expanded=true aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-7 class="collapse list-unstyled sidebar-section depth1 show"><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/xv6-intro.html class="sidebar-item-text sidebar-link"><span class=menu-text>Introduction to xv6</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/xv6-gdb.html class="sidebar-item-text sidebar-link active"><span class=menu-text>GNU Debugger Tutorial</span></a></div><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/xv6-syscall.html class="sidebar-item-text sidebar-link"><span class=menu-text>xv6 Syscall Tracing</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w10.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 10</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-8 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-8 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../handouts/vm-page-size.html class="sidebar-item-text sidebar-link"><span class=menu-text>Why Android Moved to 16KB Pages</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w11.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 11</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-9 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-9 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/xv6-forkbomb.html class="sidebar-item-text sidebar-link"><span class=menu-text>xv6 Fork Bomb</span></a></div></ul><li class="sidebar-item sidebar-item-section"><div class=sidebar-item-container><a href=../weeks/w12.html class="sidebar-item-text sidebar-link"><span class=menu-text>Worksheet 12</span></a>
<a class="sidebar-item-toggle text-start collapsed" data-bs-toggle=collapse data-bs-target=#quarto-sidebar-section-10 role=navigation aria-expanded=false aria-label="Toggle section"><i class="bi bi-chevron-right ms-2"></i></a></div><ul id=quarto-sidebar-section-10 class="collapse list-unstyled sidebar-section depth1"><li class=sidebar-item><div class=sidebar-item-container><a href=../labs/event-driven-io.html class="sidebar-item-text sidebar-link"><span class=menu-text>Event-Driven I/O</span></a></div></ul></ul></div></nav><div id=quarto-sidebar-glass class=quarto-sidebar-collapse-item data-bs-toggle=collapse data-bs-target=.quarto-sidebar-collapse-item></div><div id=quarto-margin-sidebar class="sidebar margin-sidebar"><nav id=TOC role=doc-toc class=toc-active><h2 id=toc-title>On this page</h2><ul><li><a href=#gnu-debugger-tutorial id=toc-gnu-debugger-tutorial class="nav-link active" data-scroll-target=#gnu-debugger-tutorial>GNU Debugger Tutorial</a><li><a href=#how-to-use-gdb-with-xv6 id=toc-how-to-use-gdb-with-xv6 class=nav-link data-scroll-target=#how-to-use-gdb-with-xv6>How to use gdb with xv6</a><li><a href=#basic-but-extremely-useful-commands id=toc-basic-but-extremely-useful-commands class=nav-link data-scroll-target=#basic-but-extremely-useful-commands>Basic (but extremely useful) Commands</a><ul class=collapse><li><a href=#breakpoints-continue id=toc-breakpoints-continue class=nav-link data-scroll-target=#breakpoints-continue>Breakpoints & Continue</a><li><a href=#inspecting-values id=toc-inspecting-values class=nav-link data-scroll-target=#inspecting-values>Inspecting values</a><ul class=collapse><li><a href=#info id=toc-info class=nav-link data-scroll-target=#info>Info</a><li><a href=#print id=toc-print class=nav-link data-scroll-target=#print>Print</a><li><a href=#watch id=toc-watch class=nav-link data-scroll-target=#watch>Watch</a><li><a href=#backtrace id=toc-backtrace class=nav-link data-scroll-target=#backtrace>Backtrace</a><li><a href=#frame id=toc-frame class=nav-link data-scroll-target=#frame>Frame</a></ul><li><a href=#stepping id=toc-stepping class=nav-link data-scroll-target=#stepping>Stepping</a><ul class=collapse><li><a href=#next id=toc-next class=nav-link data-scroll-target=#next>Next</a><li><a href=#step id=toc-step class=nav-link data-scroll-target=#step>Step</a><li><a href=#other-useful-stuff id=toc-other-useful-stuff class=nav-link data-scroll-target=#other-useful-stuff>Other useful stuff</a></ul></ul><li><a href=#conclusion id=toc-conclusion class=nav-link data-scroll-target=#conclusion>Conclusion</a></ul></nav></div><main class=content id=quarto-document-content><header id=title-block-header class=quarto-title-block><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=../weeks/w9.html>Worksheet 9</a><li class=breadcrumb-item><a href=../labs/xv6-gdb.html>GNU Debugger Tutorial</a></ol></nav></header><hr><section id=gnu-debugger-tutorial class=level1><h1>GNU Debugger Tutorial</h1><div class="quarto-figure quarto-figure-center" style=max-width:220px;float:right;margin-left:40px><figure class=figure><p><img src=../images/cat-detective.png class="img-fluid figure-img"><figcaption>Nini the detective</figcaption></figure></div><p><code>gdb</code> helps you trace and understand how your code really runs. In projects like xv6, relying on <code>printf()</code> to debug can be a mess. With <code>gdb</code>, you can debug faster and understand how xv6 works. This tutorial focuses on the basics, but if you’d like to dive deeper, check out the official <code>gdb</code> manual.</section><section id=how-to-use-gdb-with-xv6 class=level1><h1>How to use gdb with xv6</h1><p>Run <code>make qemu-gdb</code>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb1><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb1-1><a href=#cb1-1 aria-hidden=true tabindex=-1></a><span class=ex>$</span> make qemu-gdb</span>
<span id=cb1-2><a href=#cb1-2 aria-hidden=true tabindex=-1></a><span class=ex>***</span> Now run <span class=st>'gdb'</span> in another window.</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>It will compile xv6 and launch the hypervisor, QEMU, in debug mode.<p>Now, run <code>gdb-multiarch</code> in another terminal:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb2><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb2-1><a href=#cb2-1 aria-hidden=true tabindex=-1></a><span class=ex>$</span> gdb-multiarch</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><div class=code-copy-outer-scaffold><div class=sourceCode id=cb3><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb3-1><a href=#cb3-1 aria-hidden=true tabindex=-1></a><span class=ex>warning:</span> File <span class=st>"/workspaces/{YourDirName}/.gdbinit"</span> auto-loading has been declined by your <span class=kw>`</span><span class=ex>auto-load</span> safe-path<span class=st>' set to "$debugdir:$datadir/auto-load".</span></span>
<span id=cb3-2><a href=#cb3-2 aria-hidden=true tabindex=-1></a><span class=st>To enable execution of this file add</span></span>
<span id=cb3-3><a href=#cb3-3 aria-hidden=true tabindex=-1></a><span class=st>        add-auto-load-safe-path /workspaces/xxx/.gdbinit</span></span>
<span id=cb3-4><a href=#cb3-4 aria-hidden=true tabindex=-1></a><span class=st>line to your configuration file "/home/vscode/.config/gdb/gdbinit".</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>To avoid typing too many commands when you open <code>gdb</code>, if you see the message above, run the following command outside <code>gdb</code> (the same environment you <code>$ make qemu</code>), and remember to replace <code>{YourDirName}</code> with your own directory name:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb4><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb4-1><a href=#cb4-1 aria-hidden=true tabindex=-1></a><span class=ex>$</span> echo <span class=st>"add-auto-load-safe-path /workspaces/{YourDirName}/.gdbinit "</span> <span class=op>&gt;&gt;</span> ~/.gdbinit</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>On Github Codespace, this would be:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb5><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb5-1><a href=#cb5-1 aria-hidden=true tabindex=-1></a><span class=ex>$</span> echo <span class=st>"add-auto-load-safe-path /workspaces/xv6-lab-syscall-tracing/.gdbinit "</span> <span class=op>&gt;&gt;</span> ~/.gdbinit</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>If you add your safe path correctly, when you open <code>gdb</code> next time you should see the following without typing any command:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb6><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb6-1><a href=#cb6-1 aria-hidden=true tabindex=-1></a><span class=ex>0x0000000000001000</span> in <span class=pp>??</span> <span class=er>(</span><span class=kw>)</span></span>
<span id=cb6-2><a href=#cb6-2 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>Now we add symbol file:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb7><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb7-1><a href=#cb7-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=fu>file</span> kernel/kernel</span>
<span id=cb7-2><a href=#cb7-2 aria-hidden=true tabindex=-1></a><span class=ex>Reading</span> symbols from kernel/kernel...</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>If you need to inspect kernel code and user code <strong>at the same time</strong>, run the following also:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb8><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb8-1><a href=#cb8-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>add-symbol-file</span> user/_sh</span>
<span id=cb8-2><a href=#cb8-2 aria-hidden=true tabindex=-1></a><span class=ex>add</span> symbol table from file <span class=st>"user/_sh"</span></span>
<span id=cb8-3><a href=#cb8-3 aria-hidden=true tabindex=-1></a><span class=ex>Reading</span> symbols from user/_sh...</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=basic-but-extremely-useful-commands class=level1><h1>Basic (but extremely useful) Commands</h1><p>Although we provide examples, it is still better that you try these commands on your own to understand and feel how they work.<section id=breakpoints-continue class=level2><h2 class=anchored data-anchor-id=breakpoints-continue>Breakpoints & Continue</h2><p>Let’s set a breakpoint after you added symbol files:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb9><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb9-1><a href=#cb9-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>b</span> syscall</span>
<span id=cb9-2><a href=#cb9-2 aria-hidden=true tabindex=-1></a><span class=ex>Breakpoint</span> 1 at 0x800027f0: file kernel/syscall.c, line 133.</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>Now gdb will <strong>pause</strong> at the breakpoint 1 after we decide to <strong>continue</strong> our program:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb10><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb10-1><a href=#cb10-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>c</span></span>
<span id=cb10-2><a href=#cb10-2 aria-hidden=true tabindex=-1></a><span class=ex>Continuing.</span></span>
<span id=cb10-3><a href=#cb10-3 aria-hidden=true tabindex=-1></a><span class=ex>[Switching</span> to Thread 1.2]</span>
<span id=cb10-4><a href=#cb10-4 aria-hidden=true tabindex=-1></a></span>
<span id=cb10-5><a href=#cb10-5 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 2 hit Breakpoint 1, syscall <span class=er>(</span><span class=kw>)</span> <span class=ex>at</span> kernel/syscall.c:133</span>
<span id=cb10-6><a href=#cb10-6 aria-hidden=true tabindex=-1></a><span class=ex>133</span>     {</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>You can also set a breakpoint on a given line of code in a program:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb11><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb11-1><a href=#cb11-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>b</span> trap.c:189</span>
<span id=cb11-2><a href=#cb11-2 aria-hidden=true tabindex=-1></a><span class=ex>Breakpoint</span> 4 at 0x800024ce: file kernel/trap.c, line 189.</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>With <code>d</code>, we can delete <strong>all breakpoints</strong>. You can also specify which breakpoint you want to delete:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb12><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb12-1><a href=#cb12-1 aria-hidden=true tabindex=-1></a><span class=ex>d</span> 1</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=inspecting-values class=level2><h2 class=anchored data-anchor-id=inspecting-values>Inspecting values</h2><section id=info class=level3><h3 class=anchored data-anchor-id=info>Info</h3><p>With <code>i r</code> we can view register contents at the current step of code. With <code>i b</code> we can view the status of breakpoints. In fact, there are a lot of information you can inspect by command <code>i</code>. Type <code>i</code> to see lists for detailed explanation.<div class=code-copy-outer-scaffold><div class=sourceCode id=cb13><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb13-1><a href=#cb13-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>i</span> r</span>
<span id=cb13-2><a href=#cb13-2 aria-hidden=true tabindex=-1></a><span class=ex>ra</span>             0x800025ac       0x800025ac <span class=op>&lt;</span>usertrap+118<span class=op>&gt;</span></span>
<span id=cb13-3><a href=#cb13-3 aria-hidden=true tabindex=-1></a><span class=ex>sp</span>             0x3fffffdfe0     0x3fffffdfe0</span>
<span id=cb13-4><a href=#cb13-4 aria-hidden=true tabindex=-1></a><span class=ex>gp</span>             0x505050505050505        0x505050505050505</span>
<span id=cb13-5><a href=#cb13-5 aria-hidden=true tabindex=-1></a><span class=ex>tp</span>             0x1      0x1 <span class=op>&lt;</span>getcmd+1<span class=op>&gt;</span></span>
<span id=cb13-6><a href=#cb13-6 aria-hidden=true tabindex=-1></a><span class=ex>t0</span>             0x80002536       2147493174</span>
<span id=cb13-7><a href=#cb13-7 aria-hidden=true tabindex=-1></a><span class=ex>t1</span>             0x8000000000087fff       <span class=at>-9223372036854218753</span></span>
<span id=cb13-8><a href=#cb13-8 aria-hidden=true tabindex=-1></a><span class=ex>t2</span>             0x505050505050505        361700864190383365</span>
<span id=cb13-9><a href=#cb13-9 aria-hidden=true tabindex=-1></a><span class=ex>fp</span>             0x3fffffe000     0x3fffffe000</span>
<span id=cb13-10><a href=#cb13-10 aria-hidden=true tabindex=-1></a><span class=ex>s1</span>             0x80012770       2147559280</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><div class=code-copy-outer-scaffold><div class=sourceCode id=cb14><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb14-1><a href=#cb14-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>i</span> b</span>
<span id=cb14-2><a href=#cb14-2 aria-hidden=true tabindex=-1></a><span class=ex>Num</span>     Type           Disp Enb Address            What</span>
<span id=cb14-3><a href=#cb14-3 aria-hidden=true tabindex=-1></a><span class=ex>1</span>       breakpoint     keep y   0x00000000800027f0 in syscall at kernel/syscall.c:133</span>
<span id=cb14-4><a href=#cb14-4 aria-hidden=true tabindex=-1></a>        <span class=ex>breakpoint</span> already hit 1 time</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=print class=level3><h3 class=anchored data-anchor-id=print>Print</h3><p>With <code>p</code>, we can print the value of a variable at the current step of code:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb15><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb15-1><a href=#cb15-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 2 hit Breakpoint 4, devintr <span class=er>(</span><span class=kw>)</span> <span class=ex>at</span> kernel/trap.c:189</span>
<span id=cb15-2><a href=#cb15-2 aria-hidden=true tabindex=-1></a><span class=ex>189</span>       if<span class=er>(</span><span class=ex>scause</span> == 0x8000000000000009L<span class=kw>){</span></span>
<span id=cb15-3><a href=#cb15-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>p</span> scause</span>
<span id=cb15-4><a href=#cb15-4 aria-hidden=true tabindex=-1></a><span class=va>$1</span> = 9223372036854775813</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>With <code>p/x</code>, we can print the value of a variable <strong>in Hexadecimal</strong>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb16><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb16-1><a href=#cb16-1 aria-hidden=true tabindex=-1></a><span class=ex>210</span>       } else if<span class=er>(</span><span class=ex>scause</span> == 0x8000000000000005L<span class=kw>){</span></span>
<span id=cb16-2><a href=#cb16-2 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>p/x</span> scause</span>
<span id=cb16-3><a href=#cb16-3 aria-hidden=true tabindex=-1></a><span class=va>$4</span> = 0x8000000000000005</span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=watch class=level3><h3 class=anchored data-anchor-id=watch>Watch</h3><p>Use <code>watch</code> to make GDB pause whenever a given variable changes:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb17><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb17-1><a href=#cb17-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>watch</span> ticks</span>
<span id=cb17-2><a href=#cb17-2 aria-hidden=true tabindex=-1></a><span class=ex>Hardware</span> watchpoint 6: ticks</span>
<span id=cb17-3><a href=#cb17-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>c</span></span>
<span id=cb17-4><a href=#cb17-4 aria-hidden=true tabindex=-1></a><span class=ex>Continuing.</span></span>
<span id=cb17-5><a href=#cb17-5 aria-hidden=true tabindex=-1></a></span>
<span id=cb17-6><a href=#cb17-6 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 1 hit Hardware watchpoint 6: ticks</span>
<span id=cb17-7><a href=#cb17-7 aria-hidden=true tabindex=-1></a></span>
<span id=cb17-8><a href=#cb17-8 aria-hidden=true tabindex=-1></a><span class=ex>Old</span> value = 2326</span>
<span id=cb17-9><a href=#cb17-9 aria-hidden=true tabindex=-1></a><span class=ex>New</span> value = 2327</span>
<span id=cb17-10><a href=#cb17-10 aria-hidden=true tabindex=-1></a><span class=fu>clockintr ()</span> <span class=ex>at</span> kernel/trap.c:169</span>
<span id=cb17-11><a href=#cb17-11 aria-hidden=true tabindex=-1></a><span class=ex>169</span>         wakeup<span class=er>(</span><span class=kw>&amp;</span><span class=ex>ticks</span><span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>You can even assign a condition to commands:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb18><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb18-1><a href=#cb18-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>watch</span> ticks if ticks==2400</span>
<span id=cb18-2><a href=#cb18-2 aria-hidden=true tabindex=-1></a><span class=ex>Hardware</span> watchpoint 7: ticks</span>
<span id=cb18-3><a href=#cb18-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>c</span></span>
<span id=cb18-4><a href=#cb18-4 aria-hidden=true tabindex=-1></a><span class=ex>Continuing.</span></span>
<span id=cb18-5><a href=#cb18-5 aria-hidden=true tabindex=-1></a></span>
<span id=cb18-6><a href=#cb18-6 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 1 hit Hardware watchpoint 7: ticks</span>
<span id=cb18-7><a href=#cb18-7 aria-hidden=true tabindex=-1></a></span>
<span id=cb18-8><a href=#cb18-8 aria-hidden=true tabindex=-1></a><span class=ex>Old</span> value = 2399</span>
<span id=cb18-9><a href=#cb18-9 aria-hidden=true tabindex=-1></a><span class=ex>New</span> value = 2400</span>
<span id=cb18-10><a href=#cb18-10 aria-hidden=true tabindex=-1></a><span class=fu>clockintr ()</span> <span class=ex>at</span> kernel/trap.c:169</span>
<span id=cb18-11><a href=#cb18-11 aria-hidden=true tabindex=-1></a><span class=ex>169</span>         wakeup<span class=er>(</span><span class=kw>&amp;</span><span class=ex>ticks</span><span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=backtrace class=level3><h3 class=anchored data-anchor-id=backtrace>Backtrace</h3><p>It is very common that you inspect a function but you don’t know <strong>who calls it</strong>, so we need <code>bt</code>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb19><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb19-1><a href=#cb19-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 1 hit Breakpoint 8, clockintr <span class=er>(</span><span class=kw>)</span> <span class=ex>at</span> kernel/trap.c:165</span>
<span id=cb19-2><a href=#cb19-2 aria-hidden=true tabindex=-1></a><span class=ex>165</span>     {</span>
<span id=cb19-3><a href=#cb19-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>bt</span></span>
<span id=cb19-4><a href=#cb19-4 aria-hidden=true tabindex=-1></a><span class=co>#0  clockintr () at kernel/trap.c:165</span></span>
<span id=cb19-5><a href=#cb19-5 aria-hidden=true tabindex=-1></a><span class=co>#1  0x0000000080002538 in devintr () at kernel/trap.c:212</span></span>
<span id=cb19-6><a href=#cb19-6 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb19-7><a href=#cb19-7 aria-hidden=true tabindex=-1></a><span class=co>#3  0x000000008000520c in kernelvec ()</span></span>
<span id=cb19-8><a href=#cb19-8 aria-hidden=true tabindex=-1></a><span class=co>#4  0x0000000080001d66 in scheduler () at kernel/proc.c:473</span></span>
<span id=cb19-9><a href=#cb19-9 aria-hidden=true tabindex=-1></a><span class=co>#5  0x0000000080000e9e in main () at kernel/main.c:44</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=frame class=level3><h3 class=anchored data-anchor-id=frame>Frame</h3><p>With <code>frame</code>, we can jump between stack frames:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb20><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb20-1><a href=#cb20-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 3 hit Breakpoint 8, clockintr <span class=er>(</span><span class=kw>)</span> <span class=ex>at</span> kernel/trap.c:165</span>
<span id=cb20-2><a href=#cb20-2 aria-hidden=true tabindex=-1></a><span class=ex>165</span>     {</span>
<span id=cb20-3><a href=#cb20-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>bt</span></span>
<span id=cb20-4><a href=#cb20-4 aria-hidden=true tabindex=-1></a><span class=co>#0  clockintr () at kernel/trap.c:165</span></span>
<span id=cb20-5><a href=#cb20-5 aria-hidden=true tabindex=-1></a><span class=co>#1  0x0000000080002538 in devintr () at kernel/trap.c:212</span></span>
<span id=cb20-6><a href=#cb20-6 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb20-7><a href=#cb20-7 aria-hidden=true tabindex=-1></a><span class=co>#3  0x000000008000520c in kernelvec ()</span></span>
<span id=cb20-8><a href=#cb20-8 aria-hidden=true tabindex=-1></a><span class=co>#4  0x0000000080001d66 in scheduler () at kernel/proc.c:473</span></span>
<span id=cb20-9><a href=#cb20-9 aria-hidden=true tabindex=-1></a><span class=co>#5  0x0000000080000e9e in main () at kernel/main.c:44</span></span>
<span id=cb20-10><a href=#cb20-10 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>frame</span> 2</span>
<span id=cb20-11><a href=#cb20-11 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb20-12><a href=#cb20-12 aria-hidden=true tabindex=-1></a><span class=ex>147</span>       if<span class=er>(</span><span class=kw>(</span><span class=ex>which_dev</span> = devintr<span class=er>(</span><span class=kw>))</span> <span class=ex>==</span> 0<span class=kw>){</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>More intuitive ways to jump between stack frames are <code>up</code> and <code>down</code>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb21><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb21-1><a href=#cb21-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 2 hit Breakpoint 8, clockintr <span class=er>(</span><span class=kw>)</span> <span class=ex>at</span> kernel/trap.c:165</span>
<span id=cb21-2><a href=#cb21-2 aria-hidden=true tabindex=-1></a><span class=ex>165</span>     {</span>
<span id=cb21-3><a href=#cb21-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>bt</span></span>
<span id=cb21-4><a href=#cb21-4 aria-hidden=true tabindex=-1></a><span class=co>#0  clockintr () at kernel/trap.c:165</span></span>
<span id=cb21-5><a href=#cb21-5 aria-hidden=true tabindex=-1></a><span class=co>#1  0x0000000080002538 in devintr () at kernel/trap.c:212</span></span>
<span id=cb21-6><a href=#cb21-6 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb21-7><a href=#cb21-7 aria-hidden=true tabindex=-1></a><span class=co>#3  0x000000008000520c in kernelvec ()</span></span>
<span id=cb21-8><a href=#cb21-8 aria-hidden=true tabindex=-1></a><span class=co>#4  0x0000000080001d66 in scheduler () at kernel/proc.c:473</span></span>
<span id=cb21-9><a href=#cb21-9 aria-hidden=true tabindex=-1></a><span class=co>#5  0x0000000080000e9e in main () at kernel/main.c:44</span></span>
<span id=cb21-10><a href=#cb21-10 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>up</span></span>
<span id=cb21-11><a href=#cb21-11 aria-hidden=true tabindex=-1></a><span class=co>#1  0x0000000080002538 in devintr () at kernel/trap.c:212</span></span>
<span id=cb21-12><a href=#cb21-12 aria-hidden=true tabindex=-1></a><span class=ex>212</span>         clockintr<span class=er>(</span><span class=kw>);</span></span>
<span id=cb21-13><a href=#cb21-13 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>up</span></span>
<span id=cb21-14><a href=#cb21-14 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb21-15><a href=#cb21-15 aria-hidden=true tabindex=-1></a><span class=ex>147</span>       if<span class=er>(</span><span class=kw>(</span><span class=ex>which_dev</span> = devintr<span class=er>(</span><span class=kw>))</span> <span class=ex>==</span> 0<span class=kw>){</span></span>
<span id=cb21-16><a href=#cb21-16 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>up</span></span>
<span id=cb21-17><a href=#cb21-17 aria-hidden=true tabindex=-1></a><span class=co>#3  0x000000008000520c in kernelvec ()</span></span>
<span id=cb21-18><a href=#cb21-18 aria-hidden=true tabindex=-1></a><span class=ex>=</span><span class=op>&gt;</span> 0x000000008000520c <span class=op>&lt;</span>kernelvec+44<span class=op>&gt;</span>:   6082                    ld      ra,0<span class=er>(</span><span class=ex>sp</span><span class=kw>)</span></span>
<span id=cb21-19><a href=#cb21-19 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>down</span></span>
<span id=cb21-20><a href=#cb21-20 aria-hidden=true tabindex=-1></a><span class=co>#2  0x0000000080002640 in kerneltrap () at kernel/trap.c:147</span></span>
<span id=cb21-21><a href=#cb21-21 aria-hidden=true tabindex=-1></a><span class=ex>147</span>       if<span class=er>(</span><span class=kw>(</span><span class=ex>which_dev</span> = devintr<span class=er>(</span><span class=kw>))</span> <span class=ex>==</span> 0<span class=kw>){</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section></section><section id=stepping class=level2><h2 class=anchored data-anchor-id=stepping>Stepping</h2><section id=next class=level3><h3 class=anchored data-anchor-id=next>Next</h3><p>Run <code>n</code> or <code>next</code> to execute commands step by step. When we encounter a function, <code>n</code> will execute that function <strong>without stepping into it</strong>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb22><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb22-1><a href=#cb22-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 1 hit Breakpoint 1, getcmd <span class=er>(</span><span class=va>buf</span><span class=op>=</span>buf@entry=0x2020 <span class=op>&lt;</span>buf<span class=op>&gt;</span> <span class=st>""</span>, <span class=va>nbuf</span><span class=op>=</span>nbuf@entry=100<span class=kw>)</span> <span class=ex>at</span> user/sh.c:136</span>
<span id=cb22-2><a href=#cb22-2 aria-hidden=true tabindex=-1></a><span class=ex>136</span>     {</span>
<span id=cb22-3><a href=#cb22-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb22-4><a href=#cb22-4 aria-hidden=true tabindex=-1></a><span class=ex>137</span>       write<span class=er>(</span><span class=ex>2,</span> <span class=st>"$ "</span>, 2<span class=kw>);</span></span>
<span id=cb22-5><a href=#cb22-5 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb22-6><a href=#cb22-6 aria-hidden=true tabindex=-1></a><span class=ex>138</span>       memset<span class=er>(</span><span class=ex>buf,</span> 0, nbuf<span class=kw>);</span></span>
<span id=cb22-7><a href=#cb22-7 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb22-8><a href=#cb22-8 aria-hidden=true tabindex=-1></a><span class=ex>139</span>       gets<span class=er>(</span><span class=ex>buf,</span> nbuf<span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=step class=level3><h3 class=anchored data-anchor-id=step>Step</h3><p>Run <code>s</code> or <code>step</code> to execute commands step by step. When we encounter a function, <code>s</code> will <strong>stepping into it</strong>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb23><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb23-1><a href=#cb23-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 2 hit Breakpoint 1, getcmd <span class=er>(</span><span class=va>buf</span><span class=op>=</span>buf@entry=0x2020 <span class=op>&lt;</span>buf<span class=op>&gt;</span> <span class=st>"adgad\n"</span>, <span class=va>nbuf</span><span class=op>=</span>nbuf@entry=100<span class=kw>)</span> <span class=ex>at</span> user/sh.c:136</span>
<span id=cb23-2><a href=#cb23-2 aria-hidden=true tabindex=-1></a><span class=ex>136</span>     {</span>
<span id=cb23-3><a href=#cb23-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb23-4><a href=#cb23-4 aria-hidden=true tabindex=-1></a><span class=ex>137</span>       write<span class=er>(</span><span class=ex>2,</span> <span class=st>"$ "</span>, 2<span class=kw>);</span></span>
<span id=cb23-5><a href=#cb23-5 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb23-6><a href=#cb23-6 aria-hidden=true tabindex=-1></a><span class=ex>138</span>       memset<span class=er>(</span><span class=ex>buf,</span> 0, nbuf<span class=kw>);</span></span>
<span id=cb23-7><a href=#cb23-7 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>s</span></span>
<span id=cb23-8><a href=#cb23-8 aria-hidden=true tabindex=-1></a><span class=ex>memset</span> <span class=er>(</span><span class=va>dst</span><span class=op>=</span>0x2020 <span class=op>&lt;</span>buf<span class=op>&gt;</span>, <span class=va>c</span><span class=op>=</span>0, <span class=va>n</span><span class=op>=</span>100<span class=kw>)</span> <span class=ex>at</span> user/ulib.c:51</span>
<span id=cb23-9><a href=#cb23-9 aria-hidden=true tabindex=-1></a><span class=ex>51</span>        for<span class=er>(</span><span class=ex>i</span> = 0<span class=kw>;</span> <span class=ex>i</span> <span class=op>&lt;</span> n<span class=kw>;</span> <span class=ex>i++</span><span class=kw>){</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section><section id=other-useful-stuff class=level3><h3 class=anchored data-anchor-id=other-useful-stuff>Other useful stuff</h3><p>For <code>s</code>,<code>n</code>,<code>b</code> and <code>c</code>, you can execute them multiple times with given number:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb24><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb24-1><a href=#cb24-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 3 hit Breakpoint 1, getcmd <span class=er>(</span><span class=va>buf</span><span class=op>=</span>buf@entry=0x2020 <span class=op>&lt;</span>buf<span class=op>&gt;</span> <span class=st>"sdgd\n"</span>, <span class=va>nbuf</span><span class=op>=</span>nbuf@entry=100<span class=kw>)</span> <span class=ex>at</span> user/sh.c:136</span>
<span id=cb24-2><a href=#cb24-2 aria-hidden=true tabindex=-1></a><span class=ex>136</span>     {</span>
<span id=cb24-3><a href=#cb24-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span> 3</span>
<span id=cb24-4><a href=#cb24-4 aria-hidden=true tabindex=-1></a><span class=ex>139</span>       gets<span class=er>(</span><span class=ex>buf,</span> nbuf<span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>Press <code>ENTER</code> without typing anything will execute the previous command:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb25><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb25-1><a href=#cb25-1 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 3 hit Breakpoint 3, getcmd <span class=er>(</span><span class=va>buf</span><span class=op>=</span>buf@entry=0x2020 <span class=op>&lt;</span>buf<span class=op>&gt;</span> <span class=st>"wrghg\n"</span>, <span class=va>nbuf</span><span class=op>=</span>nbuf@entry=100<span class=kw>)</span> <span class=ex>at</span> user/sh.c:136</span>
<span id=cb25-2><a href=#cb25-2 aria-hidden=true tabindex=-1></a><span class=ex>136</span>     {</span>
<span id=cb25-3><a href=#cb25-3 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>n</span></span>
<span id=cb25-4><a href=#cb25-4 aria-hidden=true tabindex=-1></a><span class=ex>137</span>       write<span class=er>(</span><span class=ex>2,</span> <span class=st>"$ "</span>, 2<span class=kw>);</span></span>
<span id=cb25-5><a href=#cb25-5 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> </span>
<span id=cb25-6><a href=#cb25-6 aria-hidden=true tabindex=-1></a><span class=ex>138</span>       memset<span class=er>(</span><span class=ex>buf,</span> 0, nbuf<span class=kw>);</span></span>
<span id=cb25-7><a href=#cb25-7 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> </span>
<span id=cb25-8><a href=#cb25-8 aria-hidden=true tabindex=-1></a><span class=ex>139</span>       gets<span class=er>(</span><span class=ex>buf,</span> nbuf<span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div><p>If you forget to set a breakpoint or your program continues executing but you want to pause now, Type <code>Control+C</code>:<div class=code-copy-outer-scaffold><div class=sourceCode id=cb26><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id=cb26-1><a href=#cb26-1 aria-hidden=true tabindex=-1></a><span class=kw>(</span><span class=fu>gdb</span><span class=kw>)</span> <span class=ex>c</span></span>
<span id=cb26-2><a href=#cb26-2 aria-hidden=true tabindex=-1></a><span class=ex>Continuing.</span></span>
<span id=cb26-3><a href=#cb26-3 aria-hidden=true tabindex=-1></a><span class=ex>^C</span></span>
<span id=cb26-4><a href=#cb26-4 aria-hidden=true tabindex=-1></a><span class=ex>Thread</span> 3 received signal SIGINT, Interrupt.</span>
<span id=cb26-5><a href=#cb26-5 aria-hidden=true tabindex=-1></a><span class=fu>scheduler ()</span> <span class=ex>at</span> kernel/proc.c:455</span>
<span id=cb26-6><a href=#cb26-6 aria-hidden=true tabindex=-1></a><span class=ex>455</span>         intr_on<span class=er>(</span><span class=kw>);</span></span></code></pre></div><button title="Copy to Clipboard" class=code-copy-button><i class=bi></i></button></div></section></section></section><section id=conclusion class=level1><h1>Conclusion</h1><div class="quarto-figure quarto-figure-center" style=max-width:220px;float:right;margin-left:40px><figure class=figure><p><img src=../images/cat-family.png class="img-fluid figure-img"><figcaption>Good luck</figcaption></figure></div><p>This is just the tip of the iceberg. There are still many powerful or useful functions of gdb we can’t cover in this introductory article. However, these essential commands should be enough for you to deal with all the xv6 labs. Make good use of gdb will save you a great amount of time. Good luck.</section><a onclick="return window.scrollTo(0,0),!1" role=button id=quarto-back-to-top><i class="bi bi-arrow-up"></i> Back to top</a></main><script id=quarto-html-after-body>window.document.addEventListener("DOMContentLoaded",function(){const j="",c=new window.AnchorJS;c.options={placement:"right",icon:j},c.add(".anchored");const v=e=>{for(const t of e.classList)if(t.startsWith("code-annotation-"))return!0;return!1},p=function(e){const t=e.trigger;t.blur(),t.classList.add("code-copy-button-checked");var s=t.getAttribute("title");t.setAttribute("title","Copied!");let n;window.bootstrap&&(t.setAttribute("data-bs-toggle","tooltip"),t.setAttribute("data-bs-placement","left"),t.setAttribute("data-bs-title","Copied!"),n=new bootstrap.Tooltip(t,{trigger:"manual",customClass:"code-copy-button-tooltip",offset:[0,-8]}),n.show()),setTimeout(function(){n&&(n.hide(),t.removeAttribute("data-bs-title"),t.removeAttribute("data-bs-toggle"),t.removeAttribute("data-bs-placement")),t.setAttribute("title",s),t.classList.remove("code-copy-button-checked")},1e3),e.clearSelection()},m=function(e){const n=e.parentElement.cloneNode(!0),t=n.querySelector("code");for(const e of t.children)v(e)&&e.remove();return t.innerText},b=new window.ClipboardJS(".code-copy-button:not([data-in-quarto-modal])",{text:m});if(b.on("success",p),window.document.getElementById("quarto-embedded-source-code-modal")){const e=new window.ClipboardJS(".code-copy-button[data-in-quarto-modal]",{text:m,container:window.document.getElementById("quarto-embedded-source-code-modal")});e.on("success",p)}for(var s,g=new RegExp(/^(?:http|https):\/\/localhost:?[0-9]*\//),x=new RegExp(/^mailto:/),O=new RegExp("/"+window.location.host+"/"),w=e=>O.test(e)||g.test(e)||x.test(e),u=window.document.querySelectorAll("a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)"),t=0;t<u.length;t++){const e=u[t];w(e.href)||(e.dataset.originalHref!==0[0]&&(e.href=e.dataset.originalHref),e.setAttribute("target","_blank"),e.getAttribute("rel")===null&&e.setAttribute("rel","noopener"),e.classList.add("external"))}function i(e,t,n,s){const o={allowHTML:!0,maxWidth:500,delay:100,arrow:!1,appendTo:function(e){return e.parentElement},interactive:!0,interactiveBorder:10,theme:"quarto",placement:"bottom-start"};t&&(o.content=t),n&&(o.onTrigger=n),s&&(o.onUntrigger=s),window.tippy(e,o)}const f=window.document.querySelectorAll('a[role="doc-noteref"]');for(t=0;t<f.length;t++){const e=f[t];i(e,function(){let t=e.getAttribute("data-footnote-href")||e.getAttribute("href");try{t=new URL(t).hash}catch{}const s=t.replace(/^#\/?/,""),n=window.document.getElementById(s);return n?n.innerHTML:""})}const r=window.document.querySelectorAll("a.quarto-xref"),o=(e,t)=>{const n=e=>{if(e.classList.remove("page-full","page-columns"),e.children)for(const t of e.children)n(t)};if(n(t),e===null||e.startsWith("sec-")){const e=document.createElement("div");if(t.children&&t.children.length>2){e.appendChild(t.children[0].cloneNode(!0));for(let n=1;n<t.children.length;n++){const s=t.children[n];if(s.tagName==="P"&&s.innerText==="")continue;e.appendChild(s.cloneNode(!0));break}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(e),e.innerHTML}return window.Quarto?.typesetMath&&window.Quarto.typesetMath(t),t.innerHTML}else{const e=t.querySelector("a.anchorjs-link");return e&&e.remove(),window.Quarto?.typesetMath&&window.Quarto.typesetMath(t),t.classList.contains("callout")?t.outerHTML:t.innerHTML}};for(t=0;t<r.length;t++){const e=r[t];i(e,0[0],function(t){t.disable();let n=e.getAttribute("href"),s=0[0];if(n.startsWith("#"))s=n;else try{s=new URL(n).hash}catch{}if(s){const e=s.replace(/^#\/?/,""),i=window.document.getElementById(e);if(i!==null)try{const n=o(e,i.cloneNode(!0));t.setContent(n)}finally{t.enable(),t.show()}else fetch(n.split("#")[0]).then(e=>e.text()).then(n=>{const i=new DOMParser,a=i.parseFromString(n,"text/html"),s=a.getElementById(e);if(s!==null){const n=o(e,s);t.setContent(n)}}).finally(()=>{t.enable(),t.show()})}else fetch(n).then(e=>e.text()).then(e=>{const s=new DOMParser,i=s.parseFromString(e,"text/html"),n=i.querySelector("main.content");if(n!==null){n.children.length>0&&n.children[0].tagName==="HEADER"&&n.children[0].remove();const e=o(null,n);t.setContent(e)}}).finally(()=>{t.enable(),t.show()})},function(){})}let n;const h=(e,t)=>{let n='data-code-cell="'+e+'"',s='data-code-annotation="'+t+'"';const o="span["+n+"]["+s+"]";return o},a=e=>{const d=window.document,i=e.getAttribute("data-target-cell"),r=e.getAttribute("data-target-annotation"),c=window.document.querySelector(h(i,r)),l=c.getAttribute("data-code-lines").split(","),t=l.map(e=>i+"-"+e);let s=null,o=null,a=null;if(t.length>0){const r=window.document.getElementById(t[0]);if(s=r.offsetTop,o=r.offsetHeight,a=r.parentElement.parentElement,t.length>1){const e=window.document.getElementById(t[t.length-1]),n=e.offsetTop+e.offsetHeight;o=n-s}if(s!==null&&o!==null&&a!==null){let e=window.document.getElementById("code-annotation-line-highlight");e===null&&(e=window.document.createElement("div"),e.setAttribute("id","code-annotation-line-highlight"),e.style.position="absolute",a.appendChild(e)),e.style.top=s-2+"px",e.style.height=o+4+"px",e.style.left=0;let t=window.document.getElementById("code-annotation-line-highlight-gutter");if(t===null){t=window.document.createElement("div"),t.setAttribute("id","code-annotation-line-highlight-gutter"),t.style.position="absolute";const e=window.document.getElementById(i),n=e.querySelector(".code-annotation-gutter");n.appendChild(t)}t.style.top=s-2+"px",t.style.height=o+4+"px"}n=e}},y=()=>{const e=["code-annotation-line-highlight","code-annotation-line-highlight-gutter"];e.forEach(e=>{const t=window.document.getElementById(e);t&&t.remove()}),n=0[0]};window.addEventListener("resize",_(()=>{elRect=0[0],n&&a(n)},10));function _(e,t){let s=!1,n;return(...o)=>{s?(n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,o),n=s=!1},t)):(e.apply(this,o),s=!0)}}const d=window.document.querySelectorAll(".code-annotation-anchor");for(let e=0;e<d.length;e++){const t=d[e],n=t.getAttribute("data-target-cell"),s=t.getAttribute("data-target-annotation"),o=()=>{const e=window.document.querySelector(h(n,s));if(e){const t=e.cloneNode(!0);return t.classList.add("code-annotation-tip-content"),t.outerHTML}},i={allowHTML:!0,content:o,onShow:e=>{a(e.reference),e.reference.classList.add("code-annotation-active"),window.tippy.hideAll()},onHide:e=>{y(),e.reference.classList.remove("code-annotation-active")},maxWidth:300,delay:[50,0],duration:[200,0],offset:[5,10],arrow:!0,appendTo:function(e){return e.parentElement.parentElement.parentElement},interactive:!0,interactiveBorder:10,theme:"quarto",placement:"right",popperOptions:{modifiers:[{name:"flip",options:{flipVariations:!1,allowedAutoPlacements:["right"],fallbackPlacements:["right","top","top-start","top-end","bottom","bottom-start","bottom-end","left"]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1}}]}};window.tippy(t,i)}const l=e=>{const t=e.parentElement;if(t){const n=t.dataset.cites;return n?{el:e,cites:n.split(" ")}:l(e.parentElement)}else return 0[0]};for(s=window.document.querySelectorAll('a[role="doc-biblioref"]'),t=0;t<s.length;t++){const n=s[t],e=l(n);e&&i(e.el,function(){var t=window.document.createElement("div");return e.cites.forEach(function(e){var s,n=window.document.createElement("div");n.classList.add("hanging-indent"),n.classList.add("csl-entry"),s=window.document.getElementById("ref-"+e),s&&(n.innerHTML=s.innerHTML),t.appendChild(n)}),t.innerHTML})}})</script></div><footer class=footer><div class=nav-footer><div class=nav-footer-left><p><img id=footer-cat-left src=../images/cat-left.png alt="Cat Left"></div><div class=nav-footer-center><p><span id=footer-center>Made with ❤️ by Tony, (CC&nbsp;BY&nbsp;4.0)<br><span style=font-size:8px>Cat source: Freepik and ChatGPT</span></span></div><div class=nav-footer-right><p><img id=footer-cat-right src=../images/cat-right.png alt="Cat Right"></div></div></footer>